<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAAA VA Report</title>
    <!-- Version bumped to v3 to be absolutely sure -->
    <link rel="stylesheet" href="style.css?v=3">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#002a6c"/>
</head>
<body>
    <!-- THIS IS THE CANARY. IF YOU CAN'T SEE THIS, YOU ARE VIEWING A CACHED FILE. -->
    <h1 style="text-align:center; background-color:yellow; color:black;">TESTING V3</h1>

    <header>
        <img src="https://media.faaa.com.au/logo/faaa_logo.png" alt="FAAA Logo" class="header-logo">
        <h1>Crew Report Form</h1>
    </header>

    <main>
        <!-- The rest of the form is identical... -->
        <form id="airtable-form">
            <div class="progress-bar">
                <div class="step active"></div>
                <div class="step"></div>
                <div class="step"></div>
                <div class="step"></div>
            </div>
            <fieldset class="form-step active-step">
                <legend>Your Details</legend>
                <label for="FirstName">First Name</label>
                <input type="text" id="FirstName" name="FirstName" required>
                <label for="LastName">Last Name</label>
                <input type="text" id="LastName" name="LastName" required>
                <label for="StaffNumber">Staff Number</label>
                <input type="number" id="StaffNumber" name="StaffNumber" required>
                <label for="Email2">Email</label>
                <input type="email" id="Email2" name="Email2" required>
                <label for="PhoneNumber">Phone Number</label>
                <input type="tel" id="PhoneNumber" name="PhoneNumber">
                <label>Base</label>
                <div class="button-group">
                    <button type="button" class="option-button" data-value="Melbourne">Melbourne</button>
                    <button type="button" class="option-button" data-value="Brisbane">Brisbane</button>
                    <button type="button" class="option-button" data-value="Sydney">Sydney</button>
                    <button type="button" class="option-button" data-value="Perth">Perth</button>
                    <button type="button" class="option-button" data-value="Adelaide">Adelaide</button>
                </div>
                <input type="hidden" id="Base" name="Base" required>
            </fieldset>
            <fieldset class="form-step">
                <legend>Report Details</legend>
                <label>Report Type</label>
                <div class="button-group">
                    <button type="button" class="option-button" data-value="Breach of EBA">Breach of EBA</button>
                    <button type="button" class="option-button" data-value="Rostering feedback">Rostering feedback</button>
                    <button type="button" class="option-button" data-value="Part time 80 rosters">Part time 80 rosters</button>
                    <button type="button" class="option-button" data-value="Safety">Safety</button>
                    <button type="button" class="option-button" data-value="Hotel Issues">Hotel Issues</button>
                    <button type="button" class="option-button" data-value="Fatigue">Fatigue</button>
                    <button type="button" class="option-button" data-value="Crewing disputes">Crewing disputes</button>
                    <button type="button" class="option-button" data-value="WHS Issue">WHS Issue</button>
                    <button type="button" class="option-button" data-value="Other">Other</button>
                </div>
                <input type="hidden" id="ReportType" name="ReportType" required>
                <div class="conditional-field" data-condition="ReportType" data-condition-value="Other">
                    <label for="OtherReportType">Other - Please describe report type</label>
                    <textarea id="OtherReportType" name="Other - Please describe report type" rows="3"></textarea>
                </div>
                <div class="conditional-field" data-condition="ReportType" data-condition-value="Hotel Issues">
                    <label for="WhichPortAndHotel">Which port and hotel?</label>
                    <textarea id="WhichPortAndHotel" name="Which port and hotel?" rows="3"></textarea>
                </div>
                 <div class="conditional-field" data-condition="ReportType" data-condition-value="Breach of EBA">
                    <label for="EbaClause">Which clause of the EBA do you think was breached</label>
                    <textarea id="EbaClause" name="Which clause of the EBA do you think was breached" rows="3"></textarea>
                </div>
            </fieldset>
            <fieldset class="form-step">
                <legend>Company Reports</legend>
                <label>Have you submitted a company API report?</label>
                <div class="button-group">
                    <button type="button" class="option-button selected" data-value="No">No</button>
                    <button type="button" class="option-button" data-value="Yes">Yes</button>
                </div>
                <input type="hidden" id="hasApiReport" name="hasApiReport" value="No">
                <div class="conditional-field" data-condition="hasApiReport" data-condition-value="Yes">
                    <label for="ApiRefNumber">What is your API report reference number?</label>
                    <input type="text" id="ApiRefNumber" name="What is your API report reference number?">
                </div>
                <label>Have you submitted a fatigue report?</label>
                <div class="button-group">
                    <button type="button" class="option-button selected" data-value="No">No</button>
                    <button type="button" class="option-button" data-value="Yes">Yes</button>
                </div>
                <input type="hidden" id="hasFatigueReport" name="hasFatigueReport" value="No">
                <div class="conditional-field" data-condition="hasFatigueReport" data-condition-value="Yes">
                    <label for="FatigueRefNumber">What is your fatigue report reference number?</label>
                    <textarea id="FatigueRefNumber" name="What is your fatigue report reference number?" rows="2"></textarea>
                </div>
                <label>Have you submitted a company safety report?</label>
                <div class="button-group">
                    <button type="button" class="option-button selected" data-value="No">No</button>
                    <button type="button" class="option-button" data-value="Yes">Yes</button>
                </div>
                <input type="hidden" id="hasSafetyReport" name="hasSafetyReport" value="No">
                <div class="conditional-field" data-condition="hasSafetyReport" data-condition-value="Yes">
                    <label for="SafetyRefNumber">What is your safety report reference number?</label>
                    <textarea id="SafetyRefNumber" name="What is your safety report reference number?" rows="2"></textarea>
                </div>
            </fieldset>
            <fieldset class="form-step">
                <legend>Report Body</legend>
                <label for="ReportBody">Copy and paste body of Virgin Australia report here</label>
                <textarea id="ReportBody" name="Copy and paste body of Virgin Australia report here" rows="8"></textarea>
                <label for="Attachments">Attachments <small id="attachment-note">(Online connection required)</small></label>
                <input type="file" id="Attachments" name="Attachments">
            </fieldset>
            <div class="form-navigation">
                <button type="button" id="prevBtn">Back</button>
                <button type="button" id="nextBtn">Next</button>
                <button type="submit" id="submitBtn">Submit Report</button>
            </div>
        </form>
        <section class="submissions">
            <h2>Pending Submissions</h2>
            <div id="sync-status" class="sync-wrapper">
                <button id="sync-button" hidden>Sync Now</button>
                <p id="sync-message"></p>
            </div>
            <ul id="submission-list"></ul>
        </section>
    </main>
    <footer>
        <p>Version 1.0.1</p>
    </footer>
    <script src="app.js?v=3"></script>
</body>
</html>